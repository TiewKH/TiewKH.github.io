<!DOCTYPE html>
<!--[if lt IE 7]><html class="no-js lt-ie9 lt-ie8 lt-ie7"><![endif]-->
<!--[if IE 7]><html class="no-js lt-ie9 lt-ie8" <![endif]-->
<!--[if IE 8]><html class="no-js lt-ie9" <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <title>Editing Newest JSON File In A Directory</title>
    
    <!-- Jekyll SEO tag auto-generated -->
    <!-- Begin Jekyll SEO tag v2.6.1 -->
<title>Editing Newest JSON File In A Directory | Tiew Kee Hui’s Blog</title>
<meta name="generator" content="Jekyll v3.8.5" />
<meta property="og:title" content="Editing Newest JSON File In A Directory" />
<meta name="author" content="Tiew Kee Hui" />
<meta property="og:locale" content="en_US" />
<meta name="description" content="This post shows how to edit the newest (by create date) JSON file from a Windows directory." />
<meta property="og:description" content="This post shows how to edit the newest (by create date) JSON file from a Windows directory." />
<link rel="canonical" href="https://tiewkh.github.io//blog/json-by-create-date/" />
<meta property="og:url" content="https://tiewkh.github.io//blog/json-by-create-date/" />
<meta property="og:site_name" content="Tiew Kee Hui’s Blog" />
<meta property="og:type" content="article" />
<meta property="article:published_time" content="2019-06-21T00:00:00+08:00" />
<script type="application/ld+json">
{"description":"This post shows how to edit the newest (by create date) JSON file from a Windows directory.","author":{"@type":"Person","name":"Tiew Kee Hui"},"@type":"BlogPosting","url":"https://tiewkh.github.io//blog/json-by-create-date/","headline":"Editing Newest JSON File In A Directory","dateModified":"2019-06-21T00:00:00+08:00","datePublished":"2019-06-21T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://tiewkh.github.io//blog/json-by-create-date/"},"@context":"https://schema.org"}</script>
<!-- End Jekyll SEO tag -->


    <!-- Open Graph Meta -->
    <meta content="Tiew Kee Hui's Blog" property="og:site_name">
    
      <meta content="Editing Newest JSON File In A Directory" property="og:title">
    
    
      <meta content="article" property="og:type">
    
    
      <meta content="Tiew Kee Hui's blog about his data science projects & knowledge, portfolio and occasional games achievements. Most of the posts will be related to artificial intelligence (AI), machine learning and their algorithms." property="og:description">
    
    
      <meta content="https://tiewkh.github.io//blog/json-by-create-date/" property="og:url">
    
    
      <meta content="2019-06-21T00:00:00+08:00" property="article:published_time">
      <meta content="https://tiewkh.github.io//about/" property="article:author">
    
    
      <meta content="https://tiewkh.github.io//assets/img/dinosaur.jpg" property="og:image">
    

    <!-- Twitter Cards -->
    <meta name="twitter:card" content="summary">
    <meta name="twitter:site" content="@">
    <meta name="twitter:creator" content="@">
    
      <meta name="twitter:title" content="Editing Newest JSON File In A Directory">
    
    
      <meta name="twitter:url" content="https://tiewkh.github.io//blog/json-by-create-date/">
    
    
      <meta name="twitter:description" content="Tiew Kee Hui's blog about his data science projects & knowledge, portfolio and occasional games achievements. Most of the posts will be related to artificial intelligence (AI), machine learning and their algorithms.">
    
    
      <meta name="twitter:image:src" content="https://tiewkh.github.io//assets/img/dinosaur.jpg">
    


    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="/assets/img/favicon.ico" />

    <!-- Come and get me RSS readers -->
    <link rel="alternate" type="application/rss+xml" title="Tiew Kee Hui's Blog" href="https://tiewkh.github.io//feed.xml" />
    
    <!-- Stylesheet -->
    <link rel="stylesheet" href="/assets/css/style.css">
    <!--[if IE 8]><link rel="stylesheet" href="/assets/css/ie.css"><![endif]-->
    <link rel="canonical" href="https://tiewkh.github.io//blog/json-by-create-date/">

    <!-- Modernizr -->
    <script src="/assets/js/modernizr.custom.15390.js" type="text/javascript"></script>

     <!-- Google Analytics: change UA-XXXXX-X to be your site's ID. -->
<script>
   (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

ga('create', 'UA-113305033-1', 'auto');
ga('send', 'pageview');

</script>
 
</head>


<body>

    <div class="header">
     <div class="container">
         <h1 class="logo"><a href="/">Tiew Kee Hui's Blog</a></h1>
         <nav class="nav-collapse">
             <ul class="noList">
                 
                 <li class="element first  ">
                     <a href="/index.html">Home</a>
                 </li> 
                 
                 <li class="element   ">
                     <a href="/archive">Archive</a>
                 </li> 
                 
                 <li class="element   ">
                     <a href="/about">About</a>
                 </li> 
                 
                 <li class="element   last">
                     <a href="/contact">Contact</a>
                 </li> 
                 
                 <!-- <li> <a href="https://github.com/brianmaierjr/long-haul" target="_blank">GitHub</a></li> -->
             </ul>
         </nav>
     </div>
 </div><!-- end .header -->


   <div class="content">
      <div class="container">
         <div class="post">
  
  <h1 class="postTitle">Editing Newest JSON File In A Directory</h1>
  <p class="meta">June 21, 2019 | <span class="time">1</span> Minute Read</p>
  
  <p class="intro"><span class="dropcap">T</span>his post shows how to edit the newest (by create date) JSON file from a Windows directory.</p>

<p>In this example, we are using Python 3.6.</p>

<p>First, we have to load the needed libraries.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">from</span> <span class="nn">stat</span> <span class="kn">import</span> <span class="n">S_ISREG</span><span class="p">,</span> <span class="n">ST_CTIME</span><span class="p">,</span> <span class="n">ST_MODE</span>
<span class="kn">import</span> <span class="nn">os</span><span class="p">,</span> <span class="n">time</span>
<span class="kn">import</span> <span class="nn">json</span></code></pre></figure>

<p>Then, we have to get all JSON files from a directory. Replace the directory here with the directory you want.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">directory</span> <span class="o">=</span> <span class="s">"C:/Users/tiewkeehui/JsonFiles/"</span>
<span class="n">entries</span> <span class="o">=</span> <span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">directory</span><span class="p">,</span> <span class="n">fn</span><span class="p">)</span> <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="k">if</span> <span class="n">fn</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s">'.json'</span><span class="p">))</span>
<span class="n">entries</span> <span class="o">=</span> <span class="p">((</span><span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">path</span><span class="p">),</span> <span class="n">path</span><span class="p">)</span> <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">entries</span><span class="p">)</span></code></pre></figure>

<p>Then we add the stats of all the files</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">entries</span> <span class="o">=</span> <span class="p">((</span><span class="n">stat</span><span class="p">[</span><span class="n">ST_CTIME</span><span class="p">],</span> <span class="n">path</span><span class="p">)</span> <span class="k">for</span> <span class="n">stat</span><span class="p">,</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">entries</span> <span class="k">if</span> <span class="n">S_ISREG</span><span class="p">(</span><span class="n">stat</span><span class="p">[</span><span class="n">ST_MODE</span><span class="p">]))</span></code></pre></figure>

<p>S_ISREG checks if the file is a normal file (ex. not a directory). It will return a non-zero value if it is a regular file.</p>

<p>Now we get the latest created JSON file</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="n">json_file_path</span> <span class="o">=</span> <span class="nb">sorted</span><span class="p">(</span><span class="n">entries</span><span class="p">)[</span><span class="o">-</span><span class="mi">1</span><span class="p">][</span><span class="mi">1</span><span class="p">]</span></code></pre></figure>

<p>Last but not least, we open and load the JSON file and add our new key-value pair. After that, we overwrite the existing file.</p>

<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file_path</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s">"utf-8-sig"</span><span class="p">)</span> <span class="k">as</span> <span class="n">json_file</span><span class="p">:</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">json_file</span><span class="p">)</span>
    <span class="n">data</span><span class="p">[</span><span class="s">'new_key'</span><span class="p">]</span> <span class="o">=</span> <span class="n">new_value</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">json_file_path</span><span class="p">,</span> <span class="s">'w'</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
        <span class="n">json</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">data</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span></code></pre></figure>

<p>References:</p>
<ol>
  <li><a href="https://docs.python.org/3.6/library/stat.html">https://docs.python.org/3.6/library/stat.html</a></li>
  <li><a href="https://stackoverflow.com/questions/40163270/what-is-s-isreg-and-what-does-it-do">https://stackoverflow.com/questions/40163270/what-is-s-isreg-and-what-does-it-do</a></li>
  <li><a href="https://en.wikipedia.org/wiki/Stat_(system_call)">https://en.wikipedia.org/wiki/Stat_(system_call)</a></li>
  <li><a href="https://stackoverflow.com/a/539024">https://stackoverflow.com/a/539024</a></li>
</ol>


  <!-- POST NAVIGATION -->
  <div class="postNav clearfix">
     
      <a class="prev" href="/blog/deepqlearning-openaitaxi/"><span>&laquo;&nbsp;Reinforcement Learning: Deep Q-Network (DQN) with Open AI Taxi</span>
      
    </a>
      
      
      <a class="next" href="/blog/gru-hidden-state/"><span>Tensorflow 2.0 / Keras - LSTM vs GRU Hidden States&nbsp;&raquo;</span>
       
      </a>
     
  </div>
</div>

      </div>
   </div><!-- end .content -->

   <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="footer">
   <div class="container">
      <p class="copy">&copy; 2019 Tiew Kee Hui Powered by <a href="http://jekyllrb.com">Jekyll</a></p>

      <div class="footer-links"> 
         <ul class="noList"> 
            
            
            <li><a href="https://www.linkedin.com/in/tiewkh" style="margin-right:0.5em;">
                <i class="fa fa-linkedin-square" style="font-size:1.5em;"></i>
            </a></li>
            
            
            <li><a href="https://github.com/tiewkh" style="margin-right:0.5em;">
                <i class="fa fa-github" style="font-size:1.5em;"></i>
            </a></li>
            
            
            <li><a href="https://www.youtube.com/channel/UCHvLEzWeKMRyQlAsa5iDHJA" style="margin-right:0.5em;">
                <i class="fa fa-youtube-play" style="font-size:1.5em;"></i>
            </a></li>
            
            
            <li><a href="mailto:tiewkeehui95@hotmail.com">
                  <i class="fa fa-envelope-o" style="font-size:1.5em;"></i>
            </a></li>
            
         </ul>
      </div>
   </div>
</div><!-- end .footer -->


   <!-- Add jQuery and other scripts -->
<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script>
<script>window.jQuery || document.write('<script src=""><\/script>')</script>
<script src="/assets/js/dropcap.min.js"></script>
<script src="/assets/js/responsive-nav.min.js"></script>
<script src="/assets/js/scripts.js"></script>


</body>

</html>
